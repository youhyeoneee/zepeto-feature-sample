fileFormatVersion: 2
guid: a453062f6662b4910a82a57c5f4a8c13
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_InputSystem_1 = require(\"UnityEngine.InputSystem\");\r\nconst ZEPETO_Character_Controller_1
    = require(\"ZEPETO.Character.Controller\");\r\nconst UnityEngine_1 = require(\"UnityEngine\");\r\nconst
    UnityEngine = require(\"UnityEngine\");\r\nclass QuarterViewController extends
    ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n        super(...arguments);\r\n       
    this.startPos = UnityEngine_1.Vector2.zero;\r\n        this.curPos = UnityEngine_1.Vector2.zero;\r\n       
    this.isTriggered = false;\r\n        this.isTouchDown = false;\r\n    }\r\n   
    CanMove() {\r\n        return this.isTouchDown && !this.isTriggered;\r\n    }\r\n   
    OnEnable() {\r\n        this.playerInput = this.gameObject.GetComponent($typeof(UnityEngine_InputSystem_1.PlayerInput));\r\n   
    }\r\n    Start() {\r\n        this.touchTriggerAction = this.playerInput.actions.FindAction(\"MoveTrigger\");\r\n       
    this.touchPositionAction = this.playerInput.actions.FindAction(\"Move\");\r\n       
    this.touchTriggerAction.add_started(context => {\r\n            this.isTriggered
    = true;\r\n            this.isTouchDown = true;\r\n        });\r\n        this.touchTriggerAction.add_canceled(context
    => {\r\n            this.isTriggered = false;\r\n            this.isTouchDown
    = false;\r\n        });\r\n        this.touchPositionAction.add_performed(context
    => {\r\n            if (this.isTouchDown) {\r\n                this.curPos =
    context.ReadValueAsObject();\r\n                if (this.isTriggered) {\r\n                   
    this.isTriggered = false;\r\n                    this.startPos = this.curPos;\r\n               
    }\r\n            }\r\n        });\r\n        ZEPETO_Character_Controller_1.ZepetoPlayers.instance.OnAddedLocalPlayer.AddListener(()
    => {\r\n            console.log(\"quarter view log\");\r\n            ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoCamera.gameObject.SetActive(false);\r\n           
    this.myCharacter = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoPlayer.character;\r\n           
    this.StartCoroutine(this.InputControlLoop());\r\n        });\r\n    }\r\n   
    *InputControlLoop() {\r\n        while (true) {\r\n            yield new UnityEngine.WaitForEndOfFrame();\r\n           
    if (this.myCharacter && this.CanMove()) {\r\n                const camRot = UnityEngine_1.Quaternion.Euler(0,
    UnityEngine.Camera.main.transform.rotation.eulerAngles.y, 0);\r\n               
    let moveDir = UnityEngine_1.Vector2.op_Subtraction(this.curPos, this.startPos);\r\n               
    moveDir = UnityEngine_1.Vector2.op_Division(moveDir, 100);\r\n               
    if (moveDir.magnitude > 0) {\r\n                    if (moveDir.magnitude > 1)
    {\r\n                        moveDir.Normalize();\r\n                    }\r\n                   
    let optMoveDir = new UnityEngine_1.Vector3(moveDir.x, 0, moveDir.y);\r\n                   
    optMoveDir = UnityEngine_1.Vector3.op_Multiply(optMoveDir, UnityEngine_1.Time.deltaTime
    * 80);\r\n                    this.myCharacter.Move(UnityEngine_1.Quaternion.op_Multiply(camRot,
    optMoveDir));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.default
    = QuarterViewController;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VzdG9tQ2hhcmFjdGVyQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkN1c3RvbUNoYXJhY3RlckNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpREFBc0Q7QUFDdEQscUVBQWtFO0FBRWxFLDZFQUEyRztBQUMzRyw2Q0FBaUU7QUFDakUsMkNBQTJDO0FBRTNDLE1BQXFCLHFCQUFzQixTQUFRLHFDQUFxQjtJQUF4RTs7UUFHWSxhQUFRLEdBQVkscUJBQU8sQ0FBQyxJQUFJLENBQUM7UUFDakMsV0FBTSxHQUFZLHFCQUFPLENBQUMsSUFBSSxDQUFDO1FBTS9CLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBQzdCLGdCQUFXLEdBQVksS0FBSyxDQUFDO0lBaUV6QyxDQUFDO0lBL0RXLE9BQU87UUFDWCxPQUFPLElBQUksQ0FBQyxXQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ2pELENBQUM7SUFFRCxRQUFRO1FBQ0osSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksU0FBQyxxQ0FBVyxFQUFHLENBQUM7SUFDbkUsQ0FBQztJQUVELEtBQUs7UUFDRCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFdkUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUMxQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztZQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUM1QixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENB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","assetPath":"Assets/Chat/CustomCharacterController.ts","manifest":{"properties":[],"name":"QuarterViewController","description":""},"isCompiled":true}'
  typescriptHash: 41e76acce833f684d70a1132d6c50a78
  onlyWriteTrigger: 0
